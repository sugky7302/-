# Item藍圖

## 類型

- 裝備: 不可疊加、可點擊、拾取後有效果
- 任務物品: 可疊加、不可點擊、拾取後沒效果
- 秘物: 可疊加、可點擊、使用後有效果、使用後會消失
- 藥劑: 同上
- 觸發任務的物品: 可疊加、可點擊、拾取後有效果、自動使用(拾取後觸發使用後有效果)、使用後會消失

## 結構

物品(基類)
|- 裝備
|- 雜物
|- 消耗品
    |- 秘物(符文、雕紋、珠寶)
    |- 藥劑、補給品
    |- 觸發任務的物品

接口: 使用table實現，例如定義StackInterface裡面全部是放可疊加的函數，如果有類別要使用，我們規定名稱，例如.stack，利用.stack = StackInterface.xxx，來引用函數，外部調用都是同一個，可以達到復用的目的。
|- 不可疊加
|- 可疊加
|- 可點擊
|- 不可點擊

## 藍圖

StackableBehavior: interface

- 可疊加的接口
- 實現
    - 物品堆疊
    - 使用技能時堆疊
    - 週期性堆疊
    - 被動效果堆疊

Activate: interface
- 可點擊的接口
- 實現
    - 點擊後觸發被動技能效果
    - 點擊後主動施放技能
    - 點擊後再點擊其他物品觸發

Item
需求:

- 強化we的物品的功能
- 可繼承
- 不依賴jass庫，之後可用於獨立遊戲
- 抽象化
- 子類會使用jass庫封裝
單一職責: 實現物品的基本功能
成員:
- id: 唯一編號
- name: 名字
- object: 操作對象
- description: 物品說明
- kind: 物品種類
- type: 物品類型
- owner: 擁有者
- price
    - 金錢
    - 木頭
    - 其他
- event
    - 獲得
    - 使用
    - 丟棄
    - 販售
接口:
- isSameType: 檢查兩個物品的類型是否相同
    - 輸入: 物品或類型名稱
    - 輸出: 相同或不同
    - 說明: 本程序會檢查輸入物品和操作物品的類型是否相同。它會根據結果回傳相同或不同。
    - 隱藏細節: 會根據輸入的類型作不同的處理
- isSameKind: 檢查兩個物品的種類是否相同
    - 輸入: 物品或種類名稱
    - 輸出: 相同或不同
    - 說明: 本程序會檢查輸入物品和操作物品的種類是否相同。它會根據結果回傳相同或不同。
    - 隱藏細節: 會根據輸入的類型作不同的處理
- getOwnPlayer: 回傳擁有玩家
    - 輸入: X
    - 輸出: 玩家
    - 說明: 本程序會回傳擁有者的操作用戶。
    - 隱藏細節: X
- getPrice: 回傳價格
    - 輸入: X
    - 輸出: 價格
    - 說明: 本程序會調用價格函數，根據物品屬性計算出價格。它會回傳一個清單，裡面記錄所有幣別。
    - 隱藏細節: 調用價格
- registerPickUpEvent: 註冊拾取事件
    - 輸入: 拾取執行函數
    - 輸出: X
    - 說明: 本程序會調用event類別來註冊拾取事件。
    - 隱藏細節: X
- registerDropEvent
    - 輸入: 丟棄執行函數
    - 輸出: X
    - 說明: 本程序會調用event類別來註冊丟棄事件。
    - 隱藏細節: X
- registerUseEvent
    - 輸入: 使用執行函數
    - 輸出: X
    - 說明: 本程序會調用event類別來註冊使用事件。
    - 隱藏細節: X
- registerSellEvent
    - 輸入: 販售執行函數
    - 輸出: X
    - 說明: 本程序會調用event類別來註冊販售事件。
    - 隱藏細節: X
依賴:
- event
- price

Price
單一職責: 規範化所有遊戲的金錢結構
成員: 
- gold: 金，最大單位。1金可兌換1000銀
- silver: 銀，次大單位。1銀可兌換1000銅
- copper: 銅，最小單位。

接口:

- print:
    - 輸入: X
    - 輸出: 字串
    - 說明: 本程序會印出價格。
    - 隱藏細節: X
- get:
    - 輸入: X
    - 輸出: 銅
    - 說明: 本程序會回傳金銀銅三個合併計算後的數值。
    - 隱藏細節: X
- set:
    - 輸入: 銅
    - 輸出: X
    - 說明: 本程序會設定金銀銅三個單位的數值。
    - 隱藏細節: X

Attribute : Array

需求:

- 可新增、刪除、修改數值
- 只能讀取名字和數值，其他數據只有在新增時才看得到
- 如果更改數據結構，不用動到接口

單一職責: 處理屬性新增、刪除、修改的功能

接口:

- insert:
    - 輸入: 屬性名、數值、屬性可否刪除
    - 輸出: X
    - 說明: 本程序會生成一個數據結構插入到屬性表中。
    - 隱藏細節:
        - 會查詢資料庫是否有此屬性，有的話會去取資料。
        - 會根據資料庫的資料設定文字格式。
- erase:
    - 輸入: 屬性名
    - 輸出: X
    - 說明: 本程序會搜尋所有該屬性名的數據結構，並從屬性表中刪除。
    - 隱藏細節:
        - 會調用Array的刪除函數。
        - 如果輸入是整數會無動作。
- sort:
    - 輸入: X
    - 輸出: X
    - 說明: 本程序會根據屬性的優先級作排序。
    - 隱藏細節: X
- getName:
    - 輸入: 索引
    - 輸出: 屬性名
    - 說明: 本程序會回傳該索引的數據結構的屬性名，找不到會回傳nil。
    - 隱藏細節: 輸入屬性名不會有動作。
- getValue:
    - 輸入: 索引或屬性名
    - 輸出: 數值
    - 說明: 本程序會回傳該屬性所屬的數據結構的數值。
    - 隱藏細節: 找不到會回傳nil
- setValue:
    - 輸入: 索引或屬性名、數值
    - 輸出: X
    - 說明: 本程序會設定數值並修改文字格式。
    - 隱藏細節: 
        - 先查詢有無該屬性。
        - 會查詢資料庫該文字格式。
- addValue:
    - 輸入: 索引或屬性名、數值
    - 輸出: X
    - 說明: 本程序會增加數值並修改文字格式。
    - 隱藏細節: 先加總數值，再調用setValue。

Equipment(Item)
需求:

- 可自定義行為
